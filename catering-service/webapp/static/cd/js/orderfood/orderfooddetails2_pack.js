/*
 * Compressed by JSA(www.xidea.org)
 */
$(document).ready(function(){moveoversubfilterfood=function(_){$(_).prev().addClass("filtercurrent")};loadDetailClassfitlerdatas=function(){var _=Math.random();$.ajax({type:"POST",url:_context+"/orderfood.do?method=getClassfilterDatas",dataType:"json",data:{restaurantid:restaurantid,number:_},success:function(P){var B=P.alcoltypes,G=P.tastetypes,D=P.cookingmodetypes,_=P.dishestypes,O=P.rawmaterialtypes,L="";for(var M=0;M<O.length;M++)L+="<a href=\"javascript:filterDetailRawmaterialResult("+restaurantid+", '"+restaurantname+"', 1, "+O[M].id+")\">"+O[M].name+"</a>";$("#rawmateriallist").html(L);var C="";for(var J=0;J<_.length;J++)if(_[J].name!="\u4e3b\u98df")C+="<a href=\"javascript:filterDetailDishesResult("+restaurantid+", '"+restaurantname+"', 1, "+_[J].id+")\">"+_[J].name+"</a>";$("#disheslist").html(C);var H="";for(var K=0;K<D.length;K++)H+="<a href=\"javascript:filterDetailCookingResult("+restaurantid+", '"+restaurantname+"', 1, "+D[K].id+")\">"+D[K].name+"</a>";$("#cookinglist").html(H);var R="";for(var I=0;I<G.length;I++)R+="<a href=\"javascript:filterDetailTasteResult("+restaurantid+", '"+restaurantname+"', 1, "+G[I].id+")\">"+G[I].name+"</a>";$("#tastelist").html(R);var E="";for(var F=0;F<B.length;F++)E+="<a href=\"javascript:filterDetailAlcoholResult("+restaurantid+", '"+restaurantname+"', 2, "+B[F].id+")\">"+B[F].name+"</a>";$("#alcohollist").html(E);var A="<a href=\"javascript:filterDetailSetmealsotherfoodResult("+restaurantid+", '"+restaurantname+"', 3)\">\u5957\u9910</a>";$("#setmealslist").html(A);var N="<a href=\"javascript:filterDetailSetmealsotherfoodResult("+restaurantid+", '"+restaurantname+"', 4)\">\u5c0f\u5403</a>";$("#otherfoodlist").html(N);var Q="",S=false;for(J=0;J<_.length;J++)if(_[J].name=="\u4e3b\u98df"){Q="<a href=\"javascript:filterDetailDishesResult("+restaurantid+", '"+restaurantname+"', 1, "+_[J].id+")\">\u4e3b\u98df</a>";S=true}if(S==false)Q="<a href=\"javascript:filterDetailDishesResult("+restaurantid+", '"+restaurantname+"', 1, 0)\">\u4e3b\u98df</a>";$("#mainfoodlist").html(Q);getFoodTotalComment()}})};allrestfoodclick=function(){$("#allrestfood").click()};getFoodTotalComment=function(){var _=Math.random();$.ajax({type:"POST",url:_context+"/fooddetail.do?method=getTotalCommentinfo",dataType:"json",data:{foodid:fooddetailid,foodtype:foodtype,number:_},success:function(C){var B=C.color,G=C.taste,F=C.overall,H=C.scent,_=C.recommendindex,E=C.commentcnts,D=C.totalscores,A=C.cnt;$(".totalcommentcnt").append("<span style=\"font-family:Georgia,Helvetica,Arial;color:#999999;font-size:16px\">"+E+"</span>");$(".totalcnt").append("<span style=\"font-family:Georgia,Helvetica,Arial;color:#999999;font-size:16px\">"+A+"</span>");if(D=="0")$("#totalcommscoresdiv").hide();else{$(".totaltaste").append(getStarfromcomment(G));$(".totalcolor").append(getStarfromcomment(B));$(".totalscent").append(getStarfromcomment(H));$(".totaloverall").append(getStarfromcomment(F));$(".totalrecommindex").append(getStarfromcomment(_));$(".totalscores").html(D)}if(foodtype==3)getSetmealsInfo(fooddetailid)}})};function C(B){var A="."+B;$(A).each(function(A){var _=parseInt(Math.random()*1000)%9>4?true:false;if(_)$(this).css({left:$(this).offset().left-1000});else $(this).css({left:$(this).offset().left+1000})});$(A).css({"visibility":"visible"});var _=0;$(A).each(function(B){$(this).stop();$(this).animate({left:"0px",opacity:1},parseInt(Math.random()*2000)+1,function(){if(++_==$(A).size());})})}PageFoodClick2=function(B){var C=$("#totalpage").val();$("#pager").pager({pagenumber:B,pagecount:C,buttonClickCallback:PageFoodClick2});$("#pageno").val(B);var A=$("#filterobject").val();if(A=="")A="allrestfood";var _=$("#restfoodtype").val();if(_=="")_="0";var D=$("#searchword").val();if(D=="")D="0";var E=A+"_"+B+"_"+restaurantid+"_"+_+"_"+D;E=E.replace(/^.*#/,"");$.historyLoad(E)};var E={path:_context+"/",domain:"cdian.cn"},B={expires:-1,path:_context+"/",domain:"cdian.cn"};delCartRecord=function(_,A){$("#delrecdig").dialog({bgiframe:true,draggable:true,modal:true,buttons:{"\u53d6\u6d88":function(){$(this).dialog("close")},"\u786e\u8ba4":function(){var I=$.cookie("cartcookie"),G=new String(I),H=G.split("|"),D=new Array(),J=0,F=0;while(J<H.length){if(!(_==H[J]&&A==H[J+1])){D[F]=H[J];D[F+1]=H[J+1];D[F+2]=H[J+2];D[F+3]=H[J+3];D[F+4]=H[J+4];F+=5}J+=5}if(D.length>0){var C=D[0];for(F=1;F<D.length;F++)C+="|"+D[F];I=C;$.cookie("cartcookie",I,E)}else $.cookie("cartcookie",null,B);$(this).dialog("destroy")}}});$("#delrecdig").dialog("open")};delAddCartQuantity=function(A,K,_,M){var L=$("#cartquantiy"+A).val();if(K==0)$("#cartquantiy"+A).val(parseInt(L)+1);else if(L>1)$("#cartquantiy"+A).val(parseInt(L)-1);var N=$.cookie("cartcookie"),F=new String(N),G=F.split("|"),H=0;while(H<G.length){if(_==G[H]&&M==G[H+1]){var C=G[H+3],J=G[H+2],B=formatFloat(formatFloat(J,2)/parseInt(C),2);G[H+3]=parseInt($("#cartquantiy"+A).val());G[H+2]=formatFloat(B*parseInt($("#cartquantiy"+A).val()),2)}H+=5}var I=G[0];for(var D=1;D<G.length;D++)I+="|"+G[D];N=I;$.cookie("cartcookie",N,E)};delAddQuantity=function(_,A){var B=$("#quantity"+_).val();if(A==0)$("#quantity"+_).val(parseInt(B)+1);else if(B>1)$("#quantity"+_).val(parseInt(B)-1)};var _,D;if($.browser.msie){_=500;D=280}else{_=450;D=280}addToMyCartnoleave4=function(A,J,F,C,I,H,G){var E=$.cookie("restaurantid"),K=$.cookie("cartcookie");if(E!=null&&E!=H&&K!=""&&K!=null){$("#adddiffrest").dialog({bgiframe:true,draggable:true,modal:true,width:_,height:D,buttons:{"\u53d6\u6d88":function(){$(this).dialog("close")},"\u786e\u8ba4":function(){$(G).parent().find(".successaddmenu2").show();$.cookie("cartcookie",null,B);$(this).dialog("destroy");addTomycart2(A,J,F,C,I,H);setTimeout(function(){$(G).parent().find(".successaddmenu2").hide()},2000)}}});$("#adddiffrest").dialog("open")}else{$(G).parent().find(".successaddmenu2").show();addTomycart2(A,J,F,C,I,H);setTimeout(function(){$(G).parent().find(".successaddmenu2").hide()},2000)}};addToMyCartnoleave3=function(A,J,F,C,I,H,G){var E=$.cookie("restaurantid"),K=$.cookie("cartcookie");if(E!=null&&E!=H&&K!=""&&K!=null){$("#adddiffrest").dialog({bgiframe:true,draggable:true,modal:true,width:_,height:D,buttons:{"\u53d6\u6d88":function(){$(this).dialog("close")},"\u786e\u8ba4":function(){$(G).parent().find(".successaddmenu").show();$.cookie("cartcookie",null,B);$(this).dialog("destroy");addTomycart2(A,J,F,C,I,H);setTimeout(function(){$(G).parent().find(".successaddmenu").hide()},2000)}}});$("#adddiffrest").dialog("open")}else{$(G).parent().find(".successaddmenu").show();addTomycart2(A,J,F,C,I,H);setTimeout(function(){$(G).parent().find(".successaddmenu").hide()},2000)}};addToMyCartnoleave4=function(A,J,F,C,I,H,G){var E=$.cookie("restaurantid"),K=$.cookie("cartcookie");if(E!=null&&E!=H&&K!=""&&K!=null){$("#adddiffrest").dialog({bgiframe:true,draggable:true,modal:true,width:_,height:D,buttons:{"\u53d6\u6d88":function(){$(this).dialog("close")},"\u786e\u8ba4":function(){$(G).parent().parent().find(".successaddmenu1").show();$.cookie("cartcookie",null,B);$(this).dialog("destroy");addTomycart2(A,J,F,C,I,H);setTimeout(function(){$(G).parent().parent().find(".successaddmenu1").hide()},2000)}}});$("#adddiffrest").dialog("open")}else{$(G).parent().parent().find(".successaddmenu1").show();addTomycart2(A,J,F,C,I,H);setTimeout(function(){$(G).parent().parent().find(".successaddmenu1").hide()},2000)}};addToMyCartnoleave2=function(A,J,F,C,I,H,G){var E=$.cookie("restaurantid"),K=$.cookie("cartcookie");if(E!=null&&E!=H&&K!=""&&K!=null){$("#adddiffrest").dialog({bgiframe:true,draggable:true,modal:true,width:_,height:D,buttons:{"\u53d6\u6d88":function(){$(this).dialog("close")},"\u786e\u8ba4":function(){$(G).parent().parent().find(".successaddmenu").show();$.cookie("cartcookie",null,B);$(this).dialog("destroy");addTomycart2(A,J,F,C,I,H);setTimeout(function(){$(G).parent().parent().find(".successaddmenu").hide()},2000)}}});$("#adddiffrest").dialog("open")}else addTomycart2(A,J,F,C,I,H,G)};getPageFood2=function(){var G=$("#pageno").val(),_=$("#restfoodtype").val(),A=$("#filterobject").val(),F=$("#searchword").val();if(F!="")$("#labelforrestsearch").hide();else $("#labelforrestsearch").show();var B=$("#restaurantid").val(),H=$("#foodtype").val(),E=$("#type").val(),D=Math.random();$.ajax({type:"POST",url:_context+"/orderfood.do?method=getPageRestaurantFood2",dataType:"json",data:{searchword:F,foodtype:H,type:E,restfoodtype:_,filterobject:A,pageno:G,restaurantid:B,number:D},success:function(D){var _=D.foods,K=D.totalpage,E=_.length,A="";if(H=="2"){var J=$("#alcoholtypename").val();A+="<div class=\"whaterBlok\">"+"<div class=\"clearfix whaterBlokTittle\">"+"<h4 class=\"left\">"+J+"</h4>"+"<img src=\""+_context+"/images/orderfood/rTopPic.gif\" class=\"right\" />"+"</div>"+"<ul class=\"whaterSheet\">";for(var F=0;F<E;F++){A+="<li class=\"liEven clearfix\">"+"<p class=\"left pTittle\">"+_[F].name+"</p><p class=\"left\"><span>";if(_[F].makingmethod==""||_[F].makingmethod=="undefined"||_[F].makingmethod==undefined)A+="---";else A+=_[F].makingmethod;A+="</span></p> <p class=\"left gray\"> <del>\uffe5"+_[F].price+"</del></p><p class=\"left \">\uffe5"+_[F].curprice+"/"+_[F].unitdesc+"</p> <p class=\"left\"><a onclick=\"javascript:addToMyCartnoleave4('"+_[F].foodid+"', '"+_[F].foodtype+"', '"+_[F].curprice+"', '0', '"+_[F].name+"', '"+B+"', this);\"><img src=\""+_context+"/images/orderfood/btnAddToDiet.gif\" /></a></p>"+"<div class=\"successaddmenu1\">\u6210\u529f\u52a0\u5165\u83dc\u5355</div></li>"}A+="</ul></div>"}else for(var I=0;I<E;I++){A+="<div  class=\"divli\">"+"<img src=\""+_[I].picpath+"\" width=\"93\" height=\"95\" border=\"0\" onerror=\"this.src='"+_context+"/images/no_pic.gif'\" onclick=\"javascript:intofooddetails2('"+B+"', '"+_[I].foodid+"');\"/>"+"<div class=\"clearfix foodTittleAndPrice blueFont\" style=\"cursor:pointer;\" onclick=\"javascript:intofooddetails2('"+B+"', '"+_[I].foodid+"');\">"+_[I].name+"</div>";if(_[I].price=="")A+="<p><del>\u65f6\u4ef7</del><b class=\"greenFont\">&nbsp;</b>"+"<a class=\"blueFont\">&nbsp;</a>"+"</p>"+"</div>";else A+="<p><del>\uffe5"+_[I].price+"</del><b class=\"greenFont\">\uffe5"+_[I].curprice+"/"+_[I].unitdesc+"</b>"+"<a class=\"blueFont\" onclick=\"javascript:addToMyCartnoleave2('"+_[I].foodid+"', '"+_[I].foodtype+"', '"+_[I].curprice+"', '0', '"+_[I].name+"', '"+B+"', this);\">\u52a0\u5165\u83dc\u5355</a>"+"</p><div class=\"successaddmenu\">\u6210\u529f\u52a0\u5165\u83dc\u5355</div>"+"</div>"}$("div[name=\"foodlist\"]").html(A);C("divli");$("#totalpage").val(K);if(K>1)$("#pager").pager({pagenumber:G,pagecount:K,buttonClickCallback:PageFoodClick2});else $("#pager").html("");if(E<=0){$("div[name=\"foodlist\"]").html("<div class=\"noticeSign \"><h3> \u5f88\u62b1\u6b49\uff01\u6682\u65e0\u8bb0\u5f55\uff0c\u8bf7\u91cd\u65b0\u64cd\u4f5c\uff01</h3></div>");$("#pager").html("")}}})};loadClassfilterdatas2=function(){var _=Math.random();$.ajax({type:"POST",url:_context+"/orderfood.do?method=getClassfilterDatas2",dataType:"json",data:{restaurantid:restaurantid,number:_},success:function(B){var E=B.restfoodtypes,A=B.alcoltypes,_=B.dishestypes,D="";for(var F=0;F<E.length;F++)if(biztype=="0"||biztype=="1")D+="<li >"+"<a href=\"javascript:void(0);\" onclick=\"clkrestfoodtype(1, '"+E[F].id+"', 0, this)\">"+E[F].name+"\u5c55\u793a</a>"+"</li>";else D+="<li >"+"<a href=\"javascript:void(0);\" onclick=\"clkrestfoodtype(1, '"+E[F].id+"', 0, this)\">"+E[F].name+"</a>"+"</li>";if(biztype=="0"||biztype=="1")D+="<li>"+"<a href=\"javascript:void(0);\" onclick=\"clkrestfoodtype(1, '"+_[0].id+"', 1, this)\">\u4e3b\u98df\u5c55\u793a</a>"+"</li>";else D+="<li>"+"<a href=\"javascript:void(0);\" onclick=\"clkrestfoodtype(1, '"+_[0].id+"', 1, this)\">\u70b9\u4e3b\u98df</a>"+"</li>";D+="<li onmouseover=\"javascript:moveoverfilterfood(event, this);\" style=\"z-index:100;\">"+"<a href=\"javascript:void(0);\">";if(biztype=="0"||biztype=="1")D+="\u9152\u6c34\u5c55\u793a";else D+="\u70b9\u9152\u6c34";D+="</a>"+"<div  class=\"navChild\" onmouseout=\"javascript:moveoutfilterfood(this);\" id=\"navChildalco\"  style=\"z-index:300;\">"+"<div class=\"child_list\">"+"<div class=\"child_list_bg\" id=\"alcohollist\">";for(var C=0;C<A.length;C++)D+="<a href=\"javascript:clkrestfoodtype2(2, "+A[C].id+", 0, this, '"+A[C].name+"')\">"+A[C].name+"</a>";D+="</div>"+"</div>"+"</div>"+"<div style=\"clear:both\"></div>"+"</li>";$("#filtertypelist").html(D);isopensoon=true;getPageFood2()}})};loadClassfilterdatas=function(){var _=Math.random();$.ajax({type:"POST",url:_context+"/orderfood.do?method=getClassfilterDatas",dataType:"json",data:{restaurantid:restaurantid,number:_},success:function(P){var B=P.alcoltypes,G=P.tastetypes,D=P.cookingmodetypes,_=P.dishestypes,O=P.rawmaterialtypes,L="";for(var M=0;M<O.length;M++)L+="<a href=\"javascript:filterRawmaterialResult(1, "+O[M].id+")\">"+O[M].name+"</a>";$("#rawmateriallist").html(L);var C="";for(var J=0;J<_.length;J++)if(_[J].name!="\u4e3b\u98df")C+="<a href=\"javascript:filterDishesResult(1, "+_[J].id+")\">"+_[J].name+"</a>";$("#disheslist").html(C);var H="";for(var K=0;K<D.length;K++)H+="<a href=\"javascript:filterCookingResult(1, "+D[K].id+")\">"+D[K].name+"</a>";$("#cookinglist").html(H);var R="";for(var I=0;I<G.length;I++)R+="<a href=\"javascript:filterTasteResult(1, "+G[I].id+")\">"+G[I].name+"</a>";$("#tastelist").html(R);var E="";for(var F=0;F<B.length;F++)E+="<a href=\"javascript:filterAlcoholResult(2, "+B[F].id+")\">"+B[F].name+"</a>";$("#alcohollist").html(E);var A="<a href=\"javascript:filterSetmealsResult(3)\">\u5957\u9910</a>";$("#setmealslist").html(A);var N="<a href=\"javascript:filterotherfoodResult(4)\">\u5c0f\u5403</a>";$("#otherfoodlist").html(N);var Q="",S=false;for(J=0;J<_.length;J++)if(_[J].name=="\u4e3b\u98df"){Q="<a href=\"javascript:filterDishesResult(1, "+_[J].id+")\">\u4e3b\u98df</a>";S=true}if(S==false)Q="<a href=\"javascript:filterDishesResult(1, 0)\">\u70b9\u4e3b\u98df</a>";$("#mainfoodlist").html(Q)}})};clearInfo=function(A){var _=$("#filterobject").val();if(_!=""&&_!=A){$("#pageno").val("");$("#pageno").val("1");$("#totalpage").val("");$("#sorttype").val("");$("#filterobject").val("");$("#pageSize").val("");$(".displaynumber").find("a").removeClass("current");$(".displaynumber").find("a:eq(0)").addClass("current");$("#paixu").find("img").attr("src",_context+"/images/customer/sort.gif");$(".pricerange").find("select").val("");$("#pricerangesel").val("")}};$("#maindishfilter img:eq(1)").click(function(){if($("#maindishfilter .cart_cai").is(":hidden")){$("#maindishfilter img:eq(1)").attr("src",""+_context+"/images/orderfood/jian_03.jpg");$("#maindishfilter .cart_cai").show()}else{$("#maindishfilter img:eq(1)").attr("src",""+_context+"/images/orderfood/jia_03.jpg");$("#maindishfilter .cart_cai").hide()}});$("#alcoholfilter img:eq(1)").click(function(){if($("#alcoholfilter .cart_cai").is(":hidden")){$("#alcoholfilter img:eq(1)").attr("src",""+_context+"/images/orderfood/jian_03.jpg");$("#alcoholfilter .cart_cai").show()}else{$("#alcoholfilter img:eq(1)").attr("src",""+_context+"/images/orderfood/jia_03.jpg");$("#alcoholfilter .cart_cai").hide()}});searchrestword=function(){var E=$("#searchword").val();if(E==""){$("#searchword").focus();return}$("#filterobject").val("wordsearch");var H=$("#filterobject").val(),F=$("#pageno").val(),J=$("#restaurantid").val(),B=$("#sorttype").val(),G=$("#pricerangesel").val(),M=$("#foodtype").val(),A=$("#dishalcotype").val(),L=$("#dishestype").val(),I=$("#cookingtype").val(),_=$("#tastetype").val(),K=$("#rawmaterialtype").val(),C=$("#pageSize").val(),D=Math.random();$.ajax({type:"POST",url:_context+"/orderfood.do?method=getWordSearch",dataType:"json",data:{searchword:E,pageSize:C,pageno:F,restaurantid:J,filterobject:H,sorttype:B,foodtype:M,dishalcotype:A,dishestype:L,cookingtype:I,tastetype:_,rawmaterialtype:K,pricerange:G,number:D},success:function(A){var _=A.fooditems;if(_.length>0){$("#orderitems").html("");$("#orderitems").html(getDiv(_));updateFoodDescription(_);for(var C=0;C<_.length;C++){if(_[C].specflag==1)$("#specflag"+C).show();else $("#specflag"+C).hide();if(_[C].unitflag==0||_[C].unitflag==""||_[C].unitflag==null)$("#unitflag"+C).text("");else $("#unitflag"+C).text("./"+_[C].unitdesc)}for(C=0;C<_.length;C++){var B="";if(_[C].specflag==1);else if(_[C].specflag==0&&_[C].discountrate!=10){B+="["+_[C].discountrate+"\u6298]";$("#pricearea"+C).append(B)}}updateStarComment(_);updateSetmealDetails(_);$("#totalpage").val("");$("#totalpage").val(A.totalpage);if(A.totalpage>1){if(F=="")F="1";$("#pager").pager({pagenumber:F,pagecount:A.totalpage,buttonClickCallback:PageClick})}else $("#pager").html("")}else{$("#pager").html("");$("#orderitems").html("  <div class=\"noticeSign \"><h3> \u5f88\u62b1\u6b49\uff01\u6682\u65e0\u8bb0\u5f55\uff0c\u8bf7\u91cd\u65b0\u64cd\u4f5c\uff01</h3> </div>");$("#orderitems").show()}}})};searchorderfood=function(){var E=$("#searchword").val();if(E!="")$("#labelforrestsearch").hide();else $("#labelforrestsearch").show();var H=$("#filterobject").val(),F=$("#pageno").val(),J=$("#restaurantid").val(),B=$("#sorttype").val(),M=$("#foodtype").val(),G=$("#pricerangesel").val(),A=$("#dishalcotype").val(),L=$("#dishestype").val(),I=$("#cookingtype").val(),_=$("#tastetype").val(),K=$("#rawmaterialtype").val(),C=$("#pageSize").val(),D=Math.random();$.ajax({type:"POST",url:_context+"/orderfood.do?method=getWordSearch",dataType:"json",data:{searchword:E,pageSize:C,pageno:F,restaurantid:J,filterobject:H,sorttype:B,foodtype:M,dishalcotype:A,dishestype:L,cookingtype:I,tastetype:_,rawmaterialtype:K,pricerange:G,number:D},success:function(A){var _=A.fooditems;if(_.length>0){$("#orderitems").html(getDiv(_));if(biztype=="0"||biztype=="1")$(".addin_menu").hide();updateFoodDescription(_);for(var C=0;C<_.length;C++){if(_[C].specflag==1)$("#specflag"+C).show();else $("#specflag"+C).hide();if(_[C].unitflag==0||_[C].unitflag==""||_[C].unitflag==null)$("#unitflag"+C).text("");else $("#unitflag"+C).text("/"+_[C].unitdesc);if(_[C].supplytype==1)$("#addtocart"+C).html("<span style=\"color:#999;cursor:default;\">\u6682\u505c\u4f9b\u5e94</span>")}for(C=0;C<_.length;C++){var B="";if(_[C].specflag==1);else if(_[C].specflag==0&&_[C].discountrate!=10){B+="["+_[C].discountrate+"\u6298]";$("#pricearea"+C).append(B)}}updateStarComment(_);updateSetmealDetails(_);$("#totalpage").val("");$("#totalpage").val(A.totalpage);if(A.totalpage>1)$("#pager").pager({pagenumber:F,pagecount:A.totalpage,buttonClickCallback:PageClick});else $("#pager").html("");$("#title_c").show()}else{$("#pager").html("");$("#orderitems").html("  <div class=\"noticeSign \"><h3> \u5f88\u62b1\u6b49\uff01\u6682\u65e0\u8bb0\u5f55\uff0c\u8bf7\u91cd\u65b0\u64cd\u4f5c\uff01</h3> </div>");$("#orderitems").show();$("#title_c").hide()}}})};$("#searchrest").click(function(){var _=$("#restfiltertype").val(),A=$("#searchword").val();if(A==""){$("#searchword").focus();return}$("#rest_search_suggest").hide();$("span[name='menutitle']").html("\u6240\u6709");$("span[name='menutitle']").unbind("click");$("span[name='menutitle']").bind("click",function(_){$("#allrestfood").click();_.stopPropagation()});$("span[name='menusectitle']").unbind("click");$("span[name='menusectitle']").html(">\u5173\u952e\u8bcd'<font color=\"black\">"+A+"</font>'").show();$("span[name='menusectitle']").bind("click",function(_){$("#searchrest").click();_.stopPropagation()});$("span[name='menusectitle']").next().remove();$("span[name='menusectitle']").css("cursor","pointer");$("#filtertypelist").find("li").removeClass("filtercurrent");var B="";if(_=="0")B="wordsearch_1_"+restaurantid+"_0_"+A;else B="wordsearch_1_10_"+restaurantid+"_0_0_0_x_0_0_0_0_"+A;B=B.replace(/^.*#/,"");$.historyLoad(B)});PageClick=function(H){var J=$("#totalpage").val();$("#pager").pager({pagenumber:H,pagecount:J,buttonClickCallback:PageClick});$("#pageno").val(H);var D=$("#searchword").val();if(D=="")D="0";var F=$("#filterobject").val();if(F=="")F="allrestfood";var I=$("#restaurantid").val(),M=$("#foodtype").val();if(M=="")M="0";var E=$("#pricerangesel").val();if(E=="")E="x";var A=$("#dishalcotype").val();if(A=="")A="0";var L=$("#dishestype").val();if(L=="")L="0";var G=$("#cookingtype").val();if(G=="")G="0";var _=$("#tastetype").val();if(_=="")_="0";var K=$("#rawmaterialtype").val();if(K=="")K="0";var B=$("#pageSize").val();if(B=="")B="10";var C=$("#sorttype").val();if(C=="")C="0";var N=F+"_"+H+"_"+B+"_"+I+"_"+C+"_"+M+"_"+A+"_"+E+"_"+L+"_"+G+"_"+_+"_"+K+"_"+D;N=N.replace(/^.*#/,"");$.historyLoad(N)};selectPricerange=function(J){$("#pricerangesel").val("");$("#pricerangesel").val($(J).val());var D=$("#searchword").val();if(D=="")D="0";var F=$("#filterobject").val();if(F=="")F="allrestfood";var H=$("#restaurantid").val(),L=$("#foodtype").val();if(L=="")L="0";var E=$("#pricerangesel").val();if(E=="")E="x";var A=$("#dishalcotype").val();if(A=="")A="0";var K=$("#dishestype").val();if(K=="")K="0";var G=$("#cookingtype").val();if(G=="")G="0";var _=$("#tastetype").val();if(_=="")_="0";var I=$("#rawmaterialtype").val();if(I=="")I="0";var B=$("#pageSize").val();if(B=="")B="10";var C=$("#sorttype").val();if(C=="")C="0";var M=F+"_1_"+B+"_"+H+"_"+C+"_"+L+"_"+A+"_"+E+"_"+K+"_"+G+"_"+_+"_"+I+"_"+D;M=M.replace(/^.*#/,"");$.historyLoad(M)};selectPageSize=function(B,F){var D=$("#searchword").val();if(D=="")D="0";var G=$("#filterobject").val();if(G=="")G="allrestfood";var I=$("#restaurantid").val(),L=$("#foodtype").val();if(L=="")L="0";var E=$("#pricerangesel").val();if(E=="")E="x";var A=$("#dishalcotype").val();if(A=="")A="0";var K=$("#dishestype").val();if(K=="")K="0";var H=$("#cookingtype").val();if(H=="")H="0";var _=$("#tastetype").val();if(_=="")_="0";var J=$("#rawmaterialtype").val();if(J=="")J="0";var C=$("#sorttype").val();if(C=="")C="0";$("#pageSize").val(B);var M=G+"_1_"+B+"_"+I+"_"+C+"_"+L+"_"+A+"_"+E+"_"+K+"_"+H+"_"+_+"_"+J+"_"+D;M=M.replace(/^.*#/,"");$.historyLoad(M)};sortbyprice=function(K){var D=$("#searchword").val();if(D=="")D="0";var G=$("#filterobject").val();if(G=="")G="allrestfood";var I=$("#restaurantid").val(),M=$("#foodtype").val();if(M=="")M="0";var E=$("#pricerangesel").val();if(E=="")E="x";var A=$("#dishalcotype").val();if(A=="")A="0";var L=$("#dishestype").val();if(L=="")L="0";var H=$("#cookingtype").val();if(H=="")H="0";var _=$("#tastetype").val();if(_=="")_="0";var J=$("#rawmaterialtype").val();if(J=="")J="0";var B=$("#pageSize").val();if(B=="")B="10";var F=$("#sorttype").val();if(F=="priceasc")$("#sorttype").val("pricedesc");else if(F=="pricedesc")$("#sorttype").val("priceasc");else $("#sorttype").val("priceasc");var C=$("#sorttype").val(),N=G+"_1_"+B+"_"+I+"_"+C+"_"+M+"_"+A+"_"+E+"_"+L+"_"+H+"_"+_+"_"+J+"_"+D;N=N.replace(/^.*#/,"");$.historyLoad(N)};sortbyeval=function(K){var D=$("#searchword").val();if(D=="")D="0";var G=$("#filterobject").val();if(G=="")G="allrestfood";var I=$("#restaurantid").val(),M=$("#foodtype").val();if(M=="")M="0";var E=$("#pricerangesel").val();if(E=="")E="x";var A=$("#dishalcotype").val();if(A=="")A="0";var L=$("#dishestype").val();if(L=="")L="0";var H=$("#cookingtype").val();if(H=="")H="0";var _=$("#tastetype").val();if(_=="")_="0";var J=$("#rawmaterialtype").val();if(J=="")J="0";var B=$("#pageSize").val();if(B=="")B="10";var F=$("#sorttype").val();if(F=="evaluateasc")$("#sorttype").val("evaluatedesc");else if(F=="evaluatedesc")$("#sorttype").val("evaluateasc");else $("#sorttype").val("evaluateasc");var C=$("#sorttype").val(),N=G+"_1_"+B+"_"+I+"_"+C+"_"+M+"_"+A+"_"+E+"_"+L+"_"+H+"_"+_+"_"+J+"_"+D;N=N.replace(/^.*#/,"");$.historyLoad(N)};isnullfilterobject=function(_){if(_=="")return;else if(_=="wordsearch"){var A=$("#searchword").val();if(A=="")return}};clearfilterobjectdata=function(){$("#foodtype").val("");$("#dishalcotype").val("");$("#dishestype").val("");$("#cookingtype").val("");$("#tastetype").val("");$("#rawmaterialtype").val("")};filterRawmaterialResult=function(K,I){$("#navChildraw").hide();clearfilterobjectdata();$("#searchword").val("");displayrestsearchlabel(1);var D=$("#searchword").val();if(D=="")D="0";$("#filterobject").val("allrestfood");var F=$("#filterobject").val(),H=$("#restaurantid").val();$("#foodtype").val(K);if(K=="")K="0";$("#pricerangesel").val("");var E=$("#pricerangesel").val();if(E=="")E="x";var A=$("#dishalcotype").val();if(A=="")A="0";var J=$("#dishestype").val();if(J=="")J="0";var G=$("#cookingtype").val();if(G=="")G="0";var _=$("#tastetype").val();if(_=="")_="0";$("#rawmaterialtype").val(I);if(I=="")I="0";$("#pageSize").val("");var B=$("#pageSize").val();if(B=="")B="10";$("#sorttype").val("");var C=$("#sorttype").val();if(C=="")C="0";var L=F+"_1_"+B+"_"+H+"_"+C+"_"+K+"_"+A+"_"+E+"_"+J+"_"+G+"_"+_+"_"+I+"_"+D;L=L.replace(/^.*#/,"");$.historyLoad(L)};filterDishesResult=function(K,J){$("#navChilddishes").hide();$("#navChildmainfood").hide();clearfilterobjectdata();$("#searchword").val("");displayrestsearchlabel(1);var D=$("#searchword").val();if(D=="")D="0";$("#filterobject").val("allrestfood");var F=$("#filterobject").val(),H=$("#restaurantid").val();$("#foodtype").val(K);if(K=="")K="0";$("#pricerangesel").val("");var E=$("#pricerangesel").val();if(E=="")E="x";var A=$("#dishalcotype").val();if(A=="")A="0";$("#dishestype").val(J);if(J=="")J="0";var G=$("#cookingtype").val();if(G=="")G="0";var _=$("#tastetype").val();if(_=="")_="0";var I=$("#rawmaterialtype").val();if(I=="")I="0";$("#pageSize").val("");var B=$("#pageSize").val();if(B=="")B="10";$("#sorttype").val("");var C=$("#sorttype").val();if(C=="")C="0";var L=F+"_1_"+B+"_"+H+"_"+C+"_"+K+"_"+A+"_"+E+"_"+J+"_"+G+"_"+_+"_"+I+"_"+D;L=L.replace(/^.*#/,"");$.historyLoad(L)};filterCookingResult=function(K,F){$("#navChildcooking").hide();clearfilterobjectdata();$("#searchword").val("");displayrestsearchlabel(1);var D=$("#searchword").val();if(D=="")D="0";$("#filterobject").val("allrestfood");var G=$("#filterobject").val(),H=$("#restaurantid").val();$("#foodtype").val(K);if(K=="")K="0";$("#pricerangesel").val("");var E=$("#pricerangesel").val();if(E=="")E="x";var A=$("#dishalcotype").val();if(A=="")A="0";var J=$("#dishestype").val();if(J=="")J="0";$("#cookingtype").val(F);if(F=="")F="0";var _=$("#tastetype").val();if(_=="")_="0";var I=$("#rawmaterialtype").val();if(I=="")I="0";$("#pageSize").val("");var B=$("#pageSize").val();if(B=="")B="10";$("#sorttype").val("");var C=$("#sorttype").val();if(C=="")C="0";var L=G+"_1_"+B+"_"+H+"_"+C+"_"+K+"_"+A+"_"+E+"_"+J+"_"+F+"_"+_+"_"+I+"_"+D;L=L.replace(/^.*#/,"");$.historyLoad(L)};filterTasteResult=function(K,_){$("#navChildtaste").hide();clearfilterobjectdata();$("#searchword").val("");displayrestsearchlabel(1);var D=$("#searchword").val();if(D=="")D="0";$("#filterobject").val("allrestfood");var F=$("#filterobject").val(),H=$("#restaurantid").val();$("#foodtype").val(K);if(K=="")K="0";$("#pricerangesel").val("");var E=$("#pricerangesel").val();if(E=="")E="x";var A=$("#dishalcotype").val();if(A=="")A="0";var J=$("#dishestype").val();if(J=="")J="0";var G=$("#cookingtype").val();if(G=="")G="0";$("#tastetype").val(_);if(_=="")_="0";var I=$("#rawmaterialtype").val();if(I=="")I="0";$("#pageSize").val("");var B=$("#pageSize").val();if(B=="")B="10";$("#sorttype").val("");var C=$("#sorttype").val();if(C=="")C="0";var L=F+"_1_"+B+"_"+H+"_"+C+"_"+K+"_"+A+"_"+E+"_"+J+"_"+G+"_"+_+"_"+I+"_"+D;L=L.replace(/^.*#/,"");$.historyLoad(L)};filterAlcoholResult=function(K,M){$("#navChildalco").hide();clearfilterobjectdata();$("#searchword").val("");displayrestsearchlabel(1);var D=$("#searchword").val();if(D=="")D="0";$("#filterobject").val("allrestfood");var F=$("#filterobject").val(),H=$("#restaurantid").val();$("#foodtype").val(K);if(K=="")K="0";$("#pricerangesel").val("");var E=$("#pricerangesel").val();if(E=="")E="x";$("#dishalcotype").val(M);var A=$("#dishalcotype").val();if(A=="")A="0";var J=$("#dishestype").val();if(J=="")J="0";var G=$("#cookingtype").val();if(G=="")G="0";var _=$("#tastetype").val();if(_=="")_="0";var I=$("#rawmaterialtype").val();if(I=="")I="0";$("#pageSize").val("");var B=$("#pageSize").val();if(B=="")B="10";$("#sorttype").val("");var C=$("#sorttype").val();if(C=="")C="0";var L=F+"_1_"+B+"_"+H+"_"+C+"_"+K+"_"+A+"_"+E+"_"+J+"_"+G+"_"+_+"_"+I+"_"+D;L=L.replace(/^.*#/,"");$.historyLoad(L)};filterSetmealsResult=function(K){$("#navChildsetmeals").hide();clearfilterobjectdata();$("#searchword").val("");displayrestsearchlabel(1);var D=$("#searchword").val();if(D=="")D="0";$("#filterobject").val("allrestfood");var F=$("#filterobject").val(),H=$("#restaurantid").val();$("#foodtype").val(K);if(K=="")K="0";$("#pricerangesel").val("");var E=$("#pricerangesel").val();if(E=="")E="x";var A=$("#dishalcotype").val();if(A=="")A="0";var J=$("#dishestype").val();if(J=="")J="0";var G=$("#cookingtype").val();if(G=="")G="0";var _=$("#tastetype").val();if(_=="")_="0";var I=$("#rawmaterialtype").val();if(I=="")I="0";$("#pageSize").val("");var B=$("#pageSize").val();if(B=="")B="10";$("#sorttype").val("");var C=$("#sorttype").val();if(C=="")C="0";var L=F+"_1_"+B+"_"+H+"_"+C+"_"+K+"_"+A+"_"+E+"_"+J+"_"+G+"_"+_+"_"+I+"_"+D;L=L.replace(/^.*#/,"");$.historyLoad(L)};filterotherfoodResult=function(K){$("#navChildotherfood").hide();clearfilterobjectdata();$("#searchword").val("");displayrestsearchlabel(1);var D=$("#searchword").val();if(D=="")D="0";$("#filterobject").val("allrestfood");var F=$("#filterobject").val(),H=$("#restaurantid").val();$("#foodtype").val(K);if(K=="")K="0";$("#pricerangesel").val("");var E=$("#pricerangesel").val();if(E=="")E="x";var A=$("#dishalcotype").val();if(A=="")A="0";var J=$("#dishestype").val();if(J=="")J="0";var G=$("#cookingtype").val();if(G=="")G="0";var _=$("#tastetype").val();if(_=="")_="0";var I=$("#rawmaterialtype").val();if(I=="")I="0";$("#pageSize").val("");var B=$("#pageSize").val();if(B=="")B="10";$("#sorttype").val("");var C=$("#sorttype").val();if(C=="")C="0";var L=F+"_1_"+B+"_"+H+"_"+C+"_"+K+"_"+A+"_"+E+"_"+J+"_"+G+"_"+_+"_"+I+"_"+D;L=L.replace(/^.*#/,"");$.historyLoad(L)};triggerFoodSearch=function($){if($=="wordsearch")searchrestword();else clickFilterItem($)};filterResult=function(C){var A=new String(C),_=$("#filterobject").val();if(_=="wordsearch"){var D=$("#searchword").val();if(D=="")return}if(_=="")return;else{var B=A.split(".");$("#foodtype").val("");$("#dishalcotype").val("");$("#foodtype").val(B[0]);if(B[0]==1);else if(B[0]==2);else if(B[0]==3);if(B.length>1)$("#dishalcotype").val(B[1]);if(_=="wordsearch")searchrestword();else clickMeanItem(_)}};updateFoodDescription=function(_){for(var B=0;B<_.length;B++){var A="";if(_[B].foodtype==1)A+="<div><span>\u83dc&#12288;&#12288;\u7cfb\uff1a</span><span class=\"text_content\">"+_[B].disalcotypename+"</span><br></div>"+"<div><span>\u53e3&#12288;&#12288;\u5473\uff1a</span><span class=\"text_content\">"+_[B].tastename+"</span><br></div>"+"<div><span>\u4e3b\u8981\u98df\u6750\uff1a</span><span class=\"text_content\">"+_[B].rawmaterialname+"</span><br></div>"+"<div><span>\u5236\u4f5c\u65b9\u6cd5\uff1a</span><span class=\"text_content\">"+_[B].makingmethod+"</span><br></div>"+"<span>\u63cf&#12288;&#12288;\u8ff0\uff1a</span><span class=\"text_content\">"+_[B].intro+"</span>";else if(_[B].foodtype==2){A+="<div><span>\u9152&#12288;&#12288;\u7c7b\uff1a</span><span class=\"text_content\">"+_[B].disalcotypename+"</span><br></div><div><span>\u54c1&#12288;&#12288;\u724c\uff1a</span><span class=\"text_content\">"+_[B].tastename+"</span><br></div><div><span>\u9152&nbsp;\u7cbe&nbsp;\u5ea6\uff1a</span><span class=\"text_content\">";if(_[B].rawmaterialname==""||_[B].rawmaterialname==null)A+="\u65e0";else A+=_[B].rawmaterialname+"%";A+="</span><br></div><div><span>\u5bb9\u91cf\uff1a</span><span class=\"text_content\">"+_[B].makingmethod+"</span><br></div><span>\u63cf&#12288;&#12288;\u8ff0\uff1a</span><span class=\"text_content\">"+_[B].intro+"</span>"}else A+="<div><span></span><span class=\"text_content\"></span><br></div>"+"<div><span></span><span class=\"text_content\"></span><br></div>"+"<span>\u63cf&#12288;&#12288;\u8ff0\uff1a</span><span class=\"text_content\">"+_[B].intro+"</span>";$("#description"+B).html(A)}};clickFilterItem=function(E){$("#filterobject").val(E);var I=$("#filterobject").val(),F=$("#pageno").val(),G=$("#totalpage").val(),K=$("#restaurantid").val(),B=$("#sorttype").val(),H=$("#pricerangesel").val(),N=$("#foodtype").val(),A=$("#dishalcotype").val(),M=$("#dishestype").val(),J=$("#cookingtype").val(),_=$("#tastetype").val(),L=$("#rawmaterialtype").val(),C=$("#pageSize").val(),D=Math.random();$.ajax({type:"POST",url:_context+"/orderfood.do?method=getWordSearch",dataType:"json",data:{pageSize:C,pageno:F,restaurantid:K,filterobject:I,sorttype:B,foodtype:N,dishalcotype:A,dishestype:M,cookingtype:J,tastetype:_,rawmaterialtype:L,pricerange:H,number:D},success:function(A){var _=A.fooditems;if(_.length>0){$("#orderitems").html(getDiv(_));updateFoodDescription(_);for(var C=0;C<_.length;C++){if(_[C].specflag==1)$("#specflag"+C).show();else $("#specflag"+C).hide();if(_[C].unitflag==0||_[C].unitflag==""||_[C].unitflag==null)$("#unitflag"+C).text("");else $("#unitflag"+C).text("/"+_[C].unitdesc)}for(C=0;C<_.length;C++){var B="";if(_[C].specflag==1);else if(_[C].specflag==0&&_[C].discountrate!=10){B+="["+_[C].discountrate+"\u6298]";$("#pricearea"+C).append(B)}}updateStarComment(_);updateSetmealDetails(_);$("#totalpage").val(A.totalpage);if(A.totalpage>1){if(F=="")F="1";$("#pager").pager({pagenumber:F,pagecount:A.totalpage,buttonClickCallback:PageClick})}else $("#pager").html("")}else{$("#pager").html("");$("#orderitems").html("<div><img src=\""+_context+"\"images/common/openSoon.png\"></div>");$("#orderitems").show()}}})};clkrestfoodtype2=function(G,_,E,C,F){$("#alcoholtypename").val(F);var A=$("#filterobject").val(),D=$("#searchword").val();if(D==""){D="0";$("span[name='menusectitle']").html(">"+F).show()}else{$("span[name='menusectitle']").html(">\u5173\u952e\u8bcd'<font color=\"black\">"+D+"</font>'").show();var B="<span style=\"color:#006FC5\" name=\"menuthirdtitle\">>"+F+"</span>";$("span[name='menusectitle']").next().remove();$("span[name='menusectitle']").after(B)}$("#filtertypelist").find("li").removeClass("filtercurrent");if(G==1)$(C).parent().addClass("filtercurrent");else $("#filtertypelist").find("li:last").addClass("filtercurrent");var H=A+"_1_"+restaurantid+"_"+_+"_"+D+"_"+G+"_"+E;H=H.replace(/^.*#/,"");$.historyLoad(H)};clkrestfoodtype=function(F,_,E,C){var A=$("#filterobject").val(),D=$("#searchword").val();if(D==""){D="0";$("span[name='menusectitle']").html(">"+$(C).html()).show()}else{$("span[name='menusectitle']").html(">\u5173\u952e\u8bcd'<font color=\"black\">"+D+"</font>'").show();var B="<span style=\"color:#006FC5\" name=\"menuthirdtitle\">>"+$(C).html()+"</span>";$("span[name='menusectitle']").next().remove();$("span[name='menusectitle']").after(B)}$("#filtertypelist").find("li").removeClass("filtercurrent");if(F==1)$(C).parent().addClass("filtercurrent");else $("#filtertypelist").find("li:last").addClass("filtercurrent");var G=A+"_1_"+restaurantid+"_"+_+"_"+D+"_"+F+"_"+E;G=G.replace(/^.*#/,"");$.historyLoad(G)};$("#allrestfood").click(function(){$("span[name='menutitle']").html("\u6240\u6709");$("span[name='menutitle']").unbind("click");$("span[name='menutitle']").bind("click",function(_){$("#allrestfood").click();_.stopPropagation()});$("span[name='menutitle']").next().hide();$("span[name='menuthirdtitle']").remove();$("#filtertypelist").find("li").removeClass("filtercurrent");var _=$("#restfiltertype").val(),A="";if(_=="0")A="allrestfood_1_"+restaurantid+"_0_0_x_x";else A="allrestfood_1_10_"+restaurantid+"_0_0_0_x_0_0_0_0_0";A=A.replace(/^.*#/,"");$.historyLoad(A)});$("#restrecommfood").click(function(){$("span[name='menutitle']").html("\u4eca\u65e5\u63a8\u8350");$("span[name='menutitle']").unbind("click");$("span[name='menutitle']").bind("click",function(_){$("#restrecommfood").click();_.stopPropagation()});$("span[name='menutitle']").next().hide();$("span[name='menuthirdtitle']").remove();var _=$("#restfiltertype").val();$("#filtertypelist").find("li").removeClass("filtercurrent");var A="";if(_=="0")A="restrecommfood_1_"+restaurantid+"_0_0_x_x";else A="restrecommfood_1_10_"+restaurantid+"_0_0_0_x_0_0_0_0_0";A=A.replace(/^.*#/,"");$.historyLoad(A)});$("#restspecfood").click(function(){$("span[name='menutitle']").html("\u4eca\u65e5\u7279\u4ef7");$("span[name='menutitle']").unbind("click");$("span[name='menutitle']").bind("click",function(_){$("#restspecfood").click();_.stopPropagation()});$("span[name='menutitle']").next().hide();$("span[name='menuthirdtitle']").remove();var _=$("#restfiltertype").val();$("#filtertypelist").find("li").removeClass("filtercurrent");var A="";if(_=="0")A="restspecfood_1_"+restaurantid+"_0_0_x_x";else A="restspecfood_1_10_"+restaurantid+"_0_0_0_x_0_0_0_0_0";A=A.replace(/^.*#/,"");$.historyLoad(A)});$("#custconsump").click(function(){common=function(){var _=$("#restfiltertype").val();$("span[name='menutitle']").html("\u6211\u5403\u8fc7\u7684\u7f8e\u98df");$("span[name='menutitle']").unbind("click");$("span[name='menutitle']").bind("click",function(_){$("#custconsump").click();_.stopPropagation()});$("span[name='menutitle']").next().hide();$("span[name='menuthirdtitle']").remove();var A="";if(_=="0"){$("#filtertypelist").find("li").removeClass("filtercurrent");A="custconsump_1_"+restaurantid+"_0_0_x_x"}else A="custconsump_1_10_"+restaurantid+"_0_0_0_x_0_0_0_0_0";A=A.replace(/^.*#/,"");$.historyLoad(A)};$.ajax({type:"POST",url:_context+"/custcentercontroller-getLoginid.html",dataType:"json",success:function(_){var B=_.customerid;if(B==""||B==null||B=="undefined")$("#customerlogindialog").dialog("open");else{var A=$("#restfiltertype").val();$("span[name='menutitle']").html("\u6211\u5403\u8fc7\u7684\u7f8e\u98df");$("span[name='menutitle']").unbind("click");$("span[name='menutitle']").bind("click",function(_){$("#custconsump").click();_.stopPropagation()});$("span[name='menutitle']").next().hide();$("span[name='menuthirdtitle']").remove();var C="";if(A=="0"){$("#filtertypelist").find("li").removeClass("filtercurrent");C="custconsump_1_"+restaurantid+"_0_0_x_x"}else C="custconsump_1_10_"+restaurantid+"_0_0_0_x_0_0_0_0_0";C=C.replace(/^.*#/,"");$.historyLoad(C)}}})});$("#custfavorite").click(function(){common=function(){var _=$("#restfiltertype").val();$("span[name='menutitle']").html("\u6211\u7684\u6536\u85cf");$("span[name='menutitle']").unbind("click");$("span[name='menutitle']").bind("click",function(_){$("#custfavorite").click();_.stopPropagation()});$("span[name='menutitle']").next().hide();$("span[name='menuthirdtitle']").remove();var A="";if(_=="0"){$("#filtertypelist").find("li").removeClass("filtercurrent");A="custfavorite_1_"+restaurantid+"_0_0_x_x"}else A="custfavorite_1_10_"+restaurantid+"_0_0_0_x_0_0_0_0_0";A=A.replace(/^.*#/,"");$.historyLoad(A)};$.ajax({type:"POST",url:_context+"/custcentercontroller-getLoginid.html",dataType:"json",success:function(_){var B=_.customerid;if(B==""||B==null||B=="undefined")$("#customerlogindialog").dialog("open");else{var A=$("#restfiltertype").val();$("span[name='menutitle']").html("\u6211\u7684\u6536\u85cf");$("span[name='menutitle']").unbind("click");$("span[name='menutitle']").bind("click",function(_){$("#custfavorite").click();_.stopPropagation()});$("span[name='menutitle']").next().hide();$("span[name='menuthirdtitle']").remove();var C="";if(A=="0"){$("#filtertypelist").find("li").removeClass("filtercurrent");C="custfavorite_1_"+restaurantid+"_0_0_x_x"}else C="custfavorite_1_10_"+restaurantid+"_0_0_0_x_0_0_0_0_0";C=C.replace(/^.*#/,"");$.historyLoad(C)}}})});clickMeanItem=function($){common=function(){clickOrderfoodMeanItem($)};if($=="custconsump"||$=="custfavorite")if(_loginid==""){openIntologin();return}clickOrderfoodMeanItem($)};clickOrderfoodMeanItem=function(E){$("#tabs ul li").removeAttr("class");$("#"+E).parent().attr("class","current");clearInfo(E);$("#searchword").val("");$("#filterobject").val(E);var G=$("#filterobject").val(),F=$("#pageno").val(),I=$("#restaurantid").val(),B=$("#sorttype").val(),L=$("#foodtype").val(),A=$("#dishalcotype").val(),K=$("#dishestype").val(),H=$("#cookingtype").val(),_=$("#tastetype").val(),J=$("#rawmaterialtype").val(),C=$("#pageSize").val(),D=Math.random();$.ajax({type:"POST",url:_context+"/orderfood.do?method=getWordSearch",dataType:"json",data:{pageSize:C,pageno:F,restaurantid:I,filterobject:G,sorttype:B,foodtype:L,dishalcotype:A,dishestype:K,cookingtype:H,tastetype:_,rawmaterialtype:J,number:D},success:function(A){var _=A.fooditems;if(_.length>0){$("#orderitems").html("");$("#orderitems").html(getDiv(_));updateFoodDescription(_);for(var C=0;C<_.length;C++){if(_[C].specflag==1)$("#specflag"+C).show();else $("#specflag"+C).hide();if(_[C].unitflag==0||_[C].unitflag==""||_[C].unitflag==null)$("#unitflag"+C).text("");else $("#unitflag"+C).text("./"+_[C].unitdesc)}for(C=0;C<_.length;C++){var B="";if(_[C].specflag==1);else if(_[C].specflag==0&&_[C].discountrate!=10){B+="["+_[C].discountrate+"\u6298]";$("#pricearea"+C).append(B)}}updateStarComment(_);updateSetmealDetails(_);$("#totalpage").val(A.totalpage);if(A.totalpage>1)$("#pager").pager({pagenumber:F,pagecount:A.totalpage,buttonClickCallback:PageClick});else $("#pager").html("")}else{$("#pager").html("");$("#orderitems").html("  <div class=\"noticeSign \"><h3> \u5f88\u62b1\u6b49\uff01\u6682\u65e0\u8bb0\u5f55\uff0c\u8bf7\u91cd\u65b0\u64cd\u4f5c\uff01</h3> </div>");$("#title_c").show();$("#orderitems").show()}}})};var H=1;showcartdata=function(){var _=$.cookie("cartcookie");if(_!=""&&_!=null){$("div#cart_list ul").html(getCartDiv(_,H));$("#totalfoodnums").text("");$("#totalfoodnums").text(getCartTotalnums(_));$("#totalfoodmoney").text("");$("#totalfoodmoney").text(getCartTotalPrice(_))}else{$("div#cart_list ul").html("");$("#totalfoodnums").text("0");$("#totalfoodmoney").text("0")}};getCartTotalPrice=function(B){var $=0,_=new String(B),A=_.split("|"),C=2;while(C<A.length){$+=formatFloat(A[C],2);C+=5}$=formatFloat($,2);return $};getCartTotalnums=function(B){var _=0,$=new String(B),A=$.split("|"),C=3;while(C<A.length){_+=parseInt(A[C]);C+=5}return _};colFavoriteFood=function(_,B,A){common=function(){ajaxColFavoriteFood(_,B,A)};$.ajax({type:"POST",url:_context+"/custcentercontroller-getLoginid.html",dataType:"json",success:function(C){var D=C.customerid;if(D==""||D==null||D=="undefined")$("#customerlogindialog").dialog("open");else ajaxColFavoriteFood(_,B,A)}})};ajaxColFavoriteFood=function(_,B,A){$.ajax({type:"POST",url:_context+"/orderfood.do?method=fooddetailAddToFavorite",dataType:"json",data:{foodid:_,foodtype:B,restaurantid:A},success:function(A){$("#fooddetail_consumpcounts").html(A.consumpcounts);$("#fooddetail_consumprk").html(A.consumprk);$("#fooddetail_commcounts").html(A.commcounts);$("#fooddetail_commrk").html(A.commrk);$("#fooddetail_colcounts").html(A.colcounts);$("#fooddetail_colrk").html(A.colrk);$("#fooddetail_hotrk").html(A.hotrk);var _=A.hotrk;$("#hotrkpercent").css("width",_*300/100);bsuccess=A.bsuccess;if(bsuccess==true)$("#colfoodsuccessdig").dialog("open");else $("#colfoodfaileddig").dialog("open")}})};getCartDiv=function(E,C){var B=new String(E),D=B.split("|"),_=parseInt(parseInt(D.length+30-1)/parseInt(30));if(C>_)C=_;var A="",F=(C-1)*30,$=parseInt(C)*30;while(F<D.length&&F<$){A+="<li><span style=\"margin-left:2px;margin-right:7px;padding-top:1px;float:left;\"><img src=\""+_context+"/images/orderfood/lite_10.jpg\" width=\"11\" height=\"11\" /></span>"+"<span class=\"food_name\">"+D[F+4]+"</span>"+"<div class=\"suokuai\"><span class=\"decrease\" onclick=\"javascript:delAddCartQuantity("+F+", 1, "+D[F]+", "+D[F+1]+")\"><img src=\""+_context+"/images/orderfood/yjian.jpg\"/></span>"+"<div style=\"position:relative;top:-1px !important;\"><input id=\"cartquantiy"+F+"\" value=\""+D[F+3]+"\"/></div>"+"<span class=\"increase\" onclick=\"javascript:delAddCartQuantity("+F+", 0, "+D[F]+", "+D[F+1]+")\"><img src=\""+_context+"/images/orderfood/yjia.jpg\"/>&nbsp;&nbsp;</span></div>"+"<span style=\"float:left;\">"+D[F+2]+"\u5143</span ><span class=\"delete\"><a href=\"javascript:delCartRecord("+D[F]+", "+D[F+1]+")\">\u5220\u9664</a></span></li>";F+=5}if(_>1)if(C>1&&C<_)A+="<li style=\"text-align:center;\"><span><a href=\"javascript:prevPage();\">\u4e0a\u4e00\u9875</a></span><span style=\"margin-left:10px;\"><a href=\"javascript:cartNextPage();\">\u4e0b\u4e00\u9875</a></span></li>";else if(C==_)A+="<li style=\"text-align:center;\"><span><a href=\"javascript:prevPage();\">\u4e0a\u4e00\u9875</a></span><span style=\"margin-left:10px;color:gray;\">\u4e0b\u4e00\u9875</span></li>";else A+="<li style=\"text-align:center;\"><span style=\"color:gray;\">\u4e0a\u4e00\u9875</a></span><span style=\"margin-left:10px;\"><a href=\"javascript:cartNextPage();\">\u4e0b\u4e00\u9875</a></span></li>";jQuery.trim(A);return A};cartNextPage=function(){H++};prevPage=function(){H--};getDiv=function(A){var E="",C=getModelObject(),D=xmlGetElementsByName(C,"item","orderfooditem"),_=getModelKeys(D[0]),F=jQuery.trim(getModelValue(D[0]));for(var G=0;G<A.length;G++){var B=F;B=modelReplace(B,_,[A[G].name,A[G].intro,_context,A[G].price,A[G].curprice,A[G].foodid,A[G].foodtype,G,$("#restaurantid").val(),$("#restaurantname").val(),A[G].colcounts,A[G].consumpcounts,A[G].picpath]);E+=B}return E};$("#ajaxsuggest").ajaxStart(function(){$(this).show()});$("#ajaxsuggest").ajaxStop(function(){$(this).hide()});if(load=="true"){var G=$("#totalpage").val(),F=$("#pageno").val();if(G>1)$("#pager").pager({pagenumber:F,pagecount:G,buttonClickCallback:PageClick})}moveovermainfood=function(_){$(_).parent().find("li").each(function(){$(this).find("div:eq(0)").hide()})};moveoversetmealsotherfood=function(_){$(_).parent().find("li").each(function(){$(this).find("div:eq(0)").hide()})};function A($){var _=window.event?window.event:$;if(window.event)_.cancelBubble=true;else _.stopPropagation()}$(document).mouseover(function(){$(".left_menu_inner").find(".navChild").hide()});moveoverfilterfood=function(_,C){$(C).parent().find("li").each(function(){$(this).find("div:eq(0)").hide()});var B=0;$(C).find("a").each(function(){B+=1});if(B==1){$(C).find(".navChild").hide();return}$(C).find("div:eq(0)").show();$(C).find("div:eq(2)").show();A(_)};moveoutfilterfood=function(_){$(_).prev().removeClass();$(_).hide()}})